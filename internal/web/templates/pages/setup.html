{{template "auth.html" .}}

{{define "setup_content"}}
<article class="auth-card">
    <header>
        <h2>–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2>
        <p>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ–º–µ–π–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–∏–º –±—é–¥–∂–µ—Ç–æ–º</p>
    </header>

    {{if .Error}}
    <div class="alert alert-error" role="alert">
        {{.Error}}
    </div>
    {{end}}

    {{template "setup_form" .}}
</article>
{{end}}

{{define "setup_form"}}
<form method="POST" action="/setup" hx-post="/setup" hx-target="closest form" hx-swap="outerHTML">
    <input type="hidden" name="_token" value="{{.CSRFToken}}">

    <fieldset>
        <legend>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–º—å–µ</legend>

        <label for="family_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏</label>
        <input
            type="text"
            id="family_name"
            name="family_name"
            value="{{.FamilyName}}"
            placeholder="–°–µ–º—å—è –ò–≤–∞–Ω–æ–≤—ã—Ö"
            {{if .FieldErrors.family_name}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.family_name}}
        <small class="error">{{.FieldErrors.family_name}}</small>
        {{end}}

        <label for="currency">–í–∞–ª—é—Ç–∞</label>
        <select
            id="currency"
            name="currency"
            {{if .FieldErrors.currency}}aria-invalid="true"{{end}}
            required>
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
            <option value="RUB" {{if eq .Currency "RUB"}}selected{{end}}>RUB - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å</option>
            <option value="USD" {{if eq .Currency "USD"}}selected{{end}}>USD - –î–æ–ª–ª–∞—Ä –°–®–ê</option>
            <option value="EUR" {{if eq .Currency "EUR"}}selected{{end}}>EUR - –ï–≤—Ä–æ</option>
        </select>
        {{if .FieldErrors.currency}}
        <small class="error">{{.FieldErrors.currency}}</small>
        {{end}}
    </fieldset>

    <fieldset>
        <legend>–î–∞–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</legend>

        <div class="grid">
            <div>
                <label for="first_name">–ò–º—è</label>
                <input
                    type="text"
                    id="first_name"
                    name="first_name"
                    value="{{.FirstName}}"
                    placeholder="–ò–≤–∞–Ω"
                    {{if .FieldErrors.first_name}}aria-invalid="true"{{end}}
                    required>
                {{if .FieldErrors.first_name}}
                <small class="error">{{.FieldErrors.first_name}}</small>
                {{end}}
            </div>

            <div>
                <label for="last_name">–§–∞–º–∏–ª–∏—è</label>
                <input
                    type="text"
                    id="last_name"
                    name="last_name"
                    value="{{.LastName}}"
                    placeholder="–ò–≤–∞–Ω–æ–≤"
                    {{if .FieldErrors.last_name}}aria-invalid="true"{{end}}
                    required>
                {{if .FieldErrors.last_name}}
                <small class="error">{{.FieldErrors.last_name}}</small>
                {{end}}
            </div>
        </div>

        <label for="email">Email</label>
        <input
            type="email"
            id="email"
            name="email"
            value="{{.Email}}"
            placeholder="your@email.com"
            {{if .FieldErrors.email}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.email}}
        <small class="error">{{.FieldErrors.email}}</small>
        {{end}}

        <label for="password">–ü–∞—Ä–æ–ª—å</label>
        <input
            type="password"
            id="password"
            name="password"
            placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
            {{if .FieldErrors.password}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.password}}
        <small class="error">{{.FieldErrors.password}}</small>
        {{end}}
        <small>–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</small>
    </fieldset>

    <button type="submit" class="btn-primary">
        <span class="htmx-indicator" aria-hidden="true">üîÑ</span>
        –°–æ–∑–¥–∞—Ç—å —Å–µ–º–µ–π–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç
    </button>
</form>
{{end}}
