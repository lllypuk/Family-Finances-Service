{{template "auth.html" .}}

{{define "login_content"}}
<article class="auth-card">
    <header>
        <h2>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h2>
        <p>–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–º–µ–π–Ω–æ–º—É –±—é–¥–∂–µ—Ç—É</p>
    </header>
    
    {{if .Error}}
    <div class="alert alert-error" role="alert">
        {{.Error}}
    </div>
    {{end}}
    
    {{template "login_form" .}}
</article>
{{end}}

{{define "login_form"}}
<form method="POST" action="/login" hx-post="/login" hx-target="closest form" hx-swap="outerHTML">
    <input type="hidden" name="_token" value="{{.CSRFToken}}">
    
    <fieldset>
        <label for="email">Email</label>
        <input 
            type="email" 
            id="email" 
            name="email" 
            value="{{.Email}}" 
            placeholder="your@email.com"
            {{if .FieldErrors.email}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.email}}
        <small class="error">{{.FieldErrors.email}}</small>
        {{end}}
    </fieldset>
    
    <fieldset>
        <label for="password">–ü–∞—Ä–æ–ª—å</label>
        <input 
            type="password" 
            id="password" 
            name="password" 
            placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
            {{if .FieldErrors.password}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.password}}
        <small class="error">{{.FieldErrors.password}}</small>
        {{end}}
    </fieldset>
    
    <button type="submit" class="btn-primary">
        <span class="htmx-indicator" aria-hidden="true">üîÑ</span>
        –í–æ–π—Ç–∏
    </button>
</form>

<p class="auth-link">
    –ù–µ—Ç —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏? <a href="/register">–°–æ–∑–¥–∞—Ç—å —Å–µ–º–µ–π–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç</a>
</p>
{{end}}