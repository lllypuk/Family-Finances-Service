{{define "users/new"}}
<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Title}} - –°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç</title>
    
    <!-- PicoCSS -->
    <link rel="stylesheet" href="/static/css/pico.min.css">
    <link rel="stylesheet" href="/static/css/custom.css">
    
    <!-- HTMX -->
    <script src="/static/js/htmx.min.js"></script>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/img/favicon.ico">
</head>
<body>
    <!-- Navigation -->
    <nav class="container-fluid">
        <ul>
            <li>
                <a href="/" class="brand">
                    <strong>üí∞ –°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç</strong>
                </a>
            </li>
        </ul>
        <ul>
            <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="/transactions">–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</a></li>
            <li><a href="/categories">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</a></li>
            <li><a href="/budgets">–ë—é–¥–∂–µ—Ç—ã</a></li>
            <li><a href="/reports">–û—Ç—á–µ—Ç—ã</a></li>
            <li><a href="/users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
        </ul>
    </nav>
    
    <!-- Main Content -->
    <main class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1>‚ûï {{.Title}}</h1>
            <nav aria-label="breadcrumb">
                <ol>
                    <li><a href="/">–ì–ª–∞–≤–Ω–∞—è</a></li>
                    <li><a href="/users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a></li>
                    <li>–î–æ–±–∞–≤–∏—Ç—å</li>
                </ol>
            </nav>
        </div>
        
        <!-- Error Messages -->
        {{if .Error}}
        <div class="alert alert-danger" role="alert">
            {{.Error}}
        </div>
        {{end}}
        
        <!-- Add User Form -->
        <section class="form-section">
            <div class="grid">
                <div></div>
                <div>
                    <form method="POST" 
                          action="/users" 
                          hx-post="/users"
                          hx-target="this"
                          hx-swap="outerHTML">
                        
                        <input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
                        
                        <!-- Personal Information -->
                        <fieldset>
                            <legend>–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</legend>
                            
                            <div class="grid">
                                <div>
                                    <label for="first_name">
                                        –ò–º—è
                                        <input type="text" 
                                               id="first_name" 
                                               name="first_name" 
                                               value="{{.FirstName}}"
                                               placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"
                                               required
                                               {{if index .FieldErrors "first_name"}}aria-invalid="true"{{end}}>
                                        {{if index .FieldErrors "first_name"}}
                                        <small class="error">{{index .FieldErrors "first_name"}}</small>
                                        {{end}}
                                    </label>
                                </div>
                                <div>
                                    <label for="last_name">
                                        –§–∞–º–∏–ª–∏—è
                                        <input type="text" 
                                               id="last_name" 
                                               name="last_name" 
                                               value="{{.LastName}}"
                                               placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é"
                                               required
                                               {{if index .FieldErrors "last_name"}}aria-invalid="true"{{end}}>
                                        {{if index .FieldErrors "last_name"}}
                                        <small class="error">{{index .FieldErrors "last_name"}}</small>
                                        {{end}}
                                    </label>
                                </div>
                            </div>
                        </fieldset>
                        
                        <!-- Account Information -->
                        <fieldset>
                            <legend>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏</legend>
                            
                            <label for="email">
                                Email –∞–¥—Ä–µ—Å
                                <input type="email" 
                                       id="email" 
                                       name="email" 
                                       value="{{.Email}}"
                                       placeholder="user@example.com"
                                       required
                                       {{if index .FieldErrors "email"}}aria-invalid="true"{{end}}>
                                {{if index .FieldErrors "email"}}
                                <small class="error">{{index .FieldErrors "email"}}</small>
                                {{end}}
                            </label>
                            
                            <label for="password">
                                –ü–∞—Ä–æ–ª—å
                                <input type="password" 
                                       id="password" 
                                       name="password" 
                                       placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
                                       required
                                       {{if index .FieldErrors "password"}}aria-invalid="true"{{end}}>
                                {{if index .FieldErrors "password"}}
                                <small class="error">{{index .FieldErrors "password"}}</small>
                                {{end}}
                            </label>
                            
                            <label for="role">
                                –†–æ–ª—å –≤ —Å–µ–º—å–µ
                                <select id="role" 
                                        name="role" 
                                        required
                                        {{if index .FieldErrors "role"}}aria-invalid="true"{{end}}>
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å...</option>
                                    {{range .Roles}}
                                    <option value="{{.Value}}" {{if eq .Value $.Role}}selected{{end}}>
                                        {{.Label}}
                                    </option>
                                    {{end}}
                                </select>
                                {{if index .FieldErrors "role"}}
                                <small class="error">{{index .FieldErrors "role"}}</small>
                                {{end}}
                                <small>
                                    <strong>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:</strong> –ü–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–º—å–µ–π<br>
                                    <strong>–£—á–∞—Å—Ç–Ω–∏–∫:</strong> –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏<br>
                                    <strong>–†–µ–±–µ–Ω–æ–∫:</strong> –¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö —Å–µ–º—å–∏
                                </small>
                            </label>
                        </fieldset>
                        
                        <!-- Form Actions -->
                        <div class="grid">
                            <a href="/users" role="button" class="secondary">
                                ‚Üê –û—Ç–º–µ–Ω–∞
                            </a>
                            <button type="submit" class="primary">
                                ‚úÖ –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                            </button>
                        </div>
                    </form>
                </div>
                <div></div>
            </div>
        </section>
    </main>
    
    <!-- Footer -->
    <footer class="container">
        <hr>
        <div class="grid">
            <div>
                <small>¬© 2025 –°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç</small>
            </div>
        </div>
    </footer>
    
    <!-- Custom JavaScript -->
    <script src="/static/js/app.js"></script>
</body>
</html>
{{end}}