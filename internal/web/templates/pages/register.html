{{template "auth.html" .}}

{{define "register_content"}}
<article class="auth-card">
    <header>
        <h2>–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–º–µ–π–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
        <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ —Å–≤–æ—é —Å–µ–º—å—é –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–±—â–∏–º –±—é–¥–∂–µ—Ç–æ–º</p>
    </header>
    
    {{if .Error}}
    <div class="alert alert-error" role="alert">
        {{.Error}}
    </div>
    {{end}}
    
    {{template "register_form" .}}
</article>
{{end}}

{{define "register_form"}}
<form method="POST" action="/register" hx-post="/register" hx-target="closest form" hx-swap="outerHTML">
    <input type="hidden" name="_token" value="{{.CSRFToken}}">
    
    <fieldset>
        <legend>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ–º—å–µ</legend>
        
        <label for="family_name">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–µ–º—å–∏</label>
        <input 
            type="text" 
            id="family_name" 
            name="family_name" 
            value="{{.FamilyName}}" 
            placeholder="–°–µ–º—å—è –ò–≤–∞–Ω–æ–≤—ã—Ö"
            {{if .FieldErrors.family_name}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.family_name}}
        <small class="error">{{.FieldErrors.family_name}}</small>
        {{end}}
        
        <label for="currency">–í–∞–ª—é—Ç–∞</label>
        <select 
            id="currency" 
            name="currency" 
            {{if .FieldErrors.currency}}aria-invalid="true"{{end}}
            required>
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞–ª—é—Ç—É</option>
            <option value="RUB" {{if eq .Currency "RUB"}}selected{{end}}>RUB - –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å</option>
            <option value="USD" {{if eq .Currency "USD"}}selected{{end}}>USD - –î–æ–ª–ª–∞—Ä –°–®–ê</option>
            <option value="EUR" {{if eq .Currency "EUR"}}selected{{end}}>EUR - –ï–≤—Ä–æ</option>
        </select>
        {{if .FieldErrors.currency}}
        <small class="error">{{.FieldErrors.currency}}</small>
        {{end}}
    </fieldset>
    
    <fieldset>
        <legend>–í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</legend>
        
        <label for="name">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
        <input 
            type="text" 
            id="name" 
            name="name" 
            value="{{.Name}}" 
            placeholder="–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
            {{if .FieldErrors.name}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.name}}
        <small class="error">{{.FieldErrors.name}}</small>
        {{end}}
        
        <div class="grid">
            <div>
                <label for="first_name">–ò–º—è</label>
                <input 
                    type="text" 
                    id="first_name" 
                    name="first_name" 
                    value="{{.FirstName}}" 
                    placeholder="–ò–≤–∞–Ω"
                    {{if .FieldErrors.first_name}}aria-invalid="true"{{end}}>
                {{if .FieldErrors.first_name}}
                <small class="error">{{.FieldErrors.first_name}}</small>
                {{end}}
            </div>
            
            <div>
                <label for="last_name">–§–∞–º–∏–ª–∏—è</label>
                <input 
                    type="text" 
                    id="last_name" 
                    name="last_name" 
                    value="{{.LastName}}" 
                    placeholder="–ò–≤–∞–Ω–æ–≤"
                    {{if .FieldErrors.last_name}}aria-invalid="true"{{end}}>
                {{if .FieldErrors.last_name}}
                <small class="error">{{.FieldErrors.last_name}}</small>
                {{end}}
            </div>
        </div>
        
        <label for="email">Email</label>
        <input 
            type="email" 
            id="email" 
            name="email" 
            value="{{.Email}}" 
            placeholder="your@email.com"
            {{if .FieldErrors.email}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.email}}
        <small class="error">{{.FieldErrors.email}}</small>
        {{end}}
        
        <label for="password">–ü–∞—Ä–æ–ª—å</label>
        <input 
            type="password" 
            id="password" 
            name="password" 
            placeholder="–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤"
            {{if .FieldErrors.password}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.password}}
        <small class="error">{{.FieldErrors.password}}</small>
        {{end}}
        
        <label for="confirm_password">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
        <input 
            type="password" 
            id="confirm_password" 
            name="confirm_password" 
            placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
            {{if .FieldErrors.confirm_password}}aria-invalid="true"{{end}}
            required>
        {{if .FieldErrors.confirm_password}}
        <small class="error">{{.FieldErrors.confirm_password}}</small>
        {{end}}
        <small>–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤</small>
    </fieldset>
    
    <button type="submit" class="btn-primary">
        <span class="htmx-indicator" aria-hidden="true">üîÑ</span>
        –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
    </button>
</form>

<p class="auth-link">
    –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <a href="/login">–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</a>
</p>
{{end}}