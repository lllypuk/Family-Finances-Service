{{define "recent-transactions"}}
<div class="recent-transactions"
     hx-get="/htmx/transactions/recent"
     hx-trigger="load, every 30s"
     hx-target="this"
     hx-swap="outerHTML">

    {{if .RecentActivity.Transactions}}
    <div class="transactions-list">
        {{range .RecentActivity.Transactions}}
        <article class="transaction-item">
            <div class="transaction-icon">
                {{.GetTypeIcon}}
            </div>
            <div class="transaction-details">
                <div class="transaction-description">
                    <strong>{{.Description}}</strong>
                    {{if .CategoryName}}
                    <small class="category-tag">{{.CategoryName}}</small>
                    {{end}}
                </div>
                <div class="transaction-meta">
                    <small class="text-muted">{{.RelativeTime}}</small>
                    <small class="text-muted">‚Ä¢</small>
                    <small class="text-muted">{{.Date.Format "02.01.2006"}}</small>
                </div>
            </div>
            <div class="transaction-amount {{.GetTypeClass}}">
                {{if eq .Type "income"}}+{{end}}{{printf "%.2f" .Amount}} ‚ÇΩ
            </div>
        </article>
        {{end}}
    </div>

    <footer class="transactions-summary">
        <div class="grid">
            <div>
                <small class="text-muted">
                    –ü–æ–∫–∞–∑–∞–Ω–æ: {{.RecentActivity.ShowingCount}} –∏–∑ {{.RecentActivity.TotalCount}}
                </small>
            </div>
            <div class="text-right">
                {{if .RecentActivity.HasMoreData}}
                <a href="/transactions" class="secondary" role="button">
                    –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Üí
                </a>
                {{end}}
            </div>
        </div>
        <small class="text-muted">
            –û–±–Ω–æ–≤–ª–µ–Ω–æ: {{.RecentActivity.LastUpdated.Format "15:04"}}
        </small>
    </footer>

    {{else}}
    <div class="empty-state">
        <div class="empty-icon">üìù</div>
        <h3>–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>
        <p class="text-muted">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ñ–∏–Ω–∞–Ω—Å—ã</p>
        <a href="/transactions/new" role="button" class="secondary">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
        </a>
    </div>
    {{end}}
</div>

<style>
.transaction-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--pico-muted-border-color);
}

.transaction-item:last-child {
    border-bottom: none;
}

.transaction-icon {
    font-size: 1.5rem;
    min-width: 2rem;
    text-align: center;
}

.transaction-details {
    flex: 1;
}

.transaction-description strong {
    display: block;
    margin-bottom: 0.25rem;
}

.category-tag {
    background: var(--pico-secondary-background);
    color: var(--pico-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: 0.25rem;
    font-size: 0.75rem;
    margin-left: 0.5rem;
}

.transaction-meta {
    display: flex;
    gap: 0.25rem;
    align-items: center;
}

.transaction-amount {
    font-weight: bold;
    font-size: 1.1rem;
    text-align: right;
    min-width: 6rem;
}

.transactions-summary {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--pico-muted-border-color);
}

.empty-state {
    text-align: center;
    padding: 2rem 1rem;
}

.empty-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
}

.empty-state h3 {
    margin-bottom: 0.5rem;
}

.empty-state p {
    margin-bottom: 1.5rem;
}

@media (max-width: 768px) {
    .transaction-item {
        gap: 0.5rem;
    }

    .transaction-amount {
        min-width: 5rem;
        font-size: 1rem;
    }

    .category-tag {
        display: block;
        margin-left: 0;
        margin-top: 0.25rem;
    }
}
</style>
{{end}}
