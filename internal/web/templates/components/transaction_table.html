{{define "components/transaction_table"}}
{{if .Transactions}}
<div class="overflow-auto">
    <table role="table">
        <thead>
            <tr>
                <th scope="col">
                    <input type="checkbox" 
                           id="select-all" 
                           onchange="toggleSelectAll(this)">
                </th>
                <th scope="col">–î–∞—Ç–∞</th>
                <th scope="col">–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th scope="col">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th scope="col">–¢–µ–≥–∏</th>
                <th scope="col">–°—É–º–º–∞</th>
                <th scope="col">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {{range .Transactions}}
            <tr>
                <td>
                    <input type="checkbox" 
                           name="transaction_ids" 
                           value="{{.ID}}"
                           onchange="updateBulkActions()">
                </td>
                <td>
                    <time datetime="{{.Date.Format "2006-01-02"}}">
                        {{.FormattedDate}}
                    </time>
                </td>
                <td>
                    <div class="transaction-description">
                        <strong>{{.Description}}</strong>
                        {{if .UserName}}
                        <br><small>–æ—Ç {{.UserName}}</small>
                        {{end}}
                    </div>
                </td>
                <td>
                    <span class="category-badge category-{{.Type}}">
                        {{if eq .Type "income"}}üí∞{{else}}üí∏{{end}}
                        {{.CategoryName}}
                    </span>
                </td>
                <td>
                    {{if .Tags}}
                    <div class="tags">
                        {{range .Tags}}
                        <span class="tag">{{.}}</span>
                        {{end}}
                    </div>
                    {{else}}
                    <small class="muted">–±–µ–∑ —Ç–µ–≥–æ–≤</small>
                    {{end}}
                </td>
                <td>
                    <strong class="amount-{{.Type}}">
                        {{.FormattedAmount}} ‚ÇΩ
                    </strong>
                </td>
                <td>
                    <div class="transaction-actions">
                        <a href="/transactions/{{.ID}}/edit" 
                           class="secondary outline" 
                           title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">
                            ‚úèÔ∏è
                        </a>
                        <button class="danger outline" 
                                hx-delete="/htmx/transactions/{{.ID}}"
                                hx-confirm="–£–¥–∞–ª–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é '{{.Description}}'?"
                                hx-target="closest tr"
                                hx-swap="outerHTML"
                                title="–£–¥–∞–ª–∏—Ç—å">
                            üóëÔ∏è
                        </button>
                    </div>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
</div>

<!-- Pagination -->
{{if .Pagination}}
<nav class="pagination" style="margin-top: 2rem;">
    <div class="grid">
        <div>
            <small>
                –ü–æ–∫–∞–∑–∞–Ω–æ {{len .Transactions}} –∏–∑ {{.Pagination.Total}}
            </small>
        </div>
        <div>
            {{if .Pagination.HasPrev}}
            <button hx-get="/htmx/transactions/list?page={{sub .Pagination.Page 1}}{{range $key, $value := .Filters}}{{if $value}}&{{$key}}={{$value}}{{end}}{{end}}"
                    hx-target="#transactions-list"
                    class="secondary outline">
                ‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è
            </button>
            {{end}}
            
            <span class="current-page">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ {{.Pagination.Page}} –∏–∑ {{.Pagination.TotalPages}}
            </span>
            
            {{if .Pagination.HasNext}}
            <button hx-get="/htmx/transactions/list?page={{add .Pagination.Page 1}}{{range $key, $value := .Filters}}{{if $value}}&{{$key}}={{$value}}{{end}}{{end}}"
                    hx-target="#transactions-list"
                    class="secondary outline">
                –°–ª–µ–¥—É—é—â–∞—è ‚Üí
            </button>
            {{end}}
        </div>
    </div>
</nav>
{{end}}
{{else}}
<!-- Empty State -->
<div class="empty-state" style="text-align: center; padding: 3rem;">
    <p style="font-size: 3rem;">üí∏</p>
    <h3>–ù–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</h3>
    <p>–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º</p>
    <a href="/transactions/new" role="button" class="primary">
        ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
    </a>
</div>
{{end}}
{{end}}